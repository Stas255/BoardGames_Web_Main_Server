<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: index.js /** * @module server * @requires server/mongoDB * @requires server/express * @requires server/TelegramBot * @desc This code sets up the application's database, web server and TelegramBot. The first line sets up the MongoDB connection and loads all the models. The second line begins loading the Express web server components, such as routes and middleware. The third line sets up the TelegramBot instance for messaging services provided by Telegram. */ require('./mongoDB/index'); require('./express/index'); require('./TelegramBot/index'); × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"TelegramBot_index.js.html":{"id":"TelegramBot_index.js.html","title":"Source: TelegramBot/index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: TelegramBot/index.js /** * @module server/TelegramBot * @requires server/classes/winston * @requires server/TelegramBot/telegraf * @desc Contains all bot hears */ const LOG = require('../classes/winston'); /** @desc This file imports all functions from ./actions, ./hears and ./commands */ const bot = require('./telegraf'); /** @function @description Imports all the functions from ./actions @param {module:server/TelegramBot/telegraf} bot Bot object created in telegraf */ require('./actions')(bot); /** @function @description Imports all the functions from ./hears @param {module:server/TelegramBot/telegraf} bot Bot object created in telegraf */ require('./hears')(bot); /** @function @description Imports all the functions from ./commands @param {module:server/TelegramBot/telegraf} bot Bot object created in telegraf */ require('./commands')(bot); /** * Launches the bot * @function * @param {Object} ctx The context object for the bot */ bot.launch().catch(error =&gt; { if (error.code === 401) { bot.context = 99; } else { bot.context = 0; } LOG.error({ error: error.message || error }); }); module.exports = bot; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"TelegramBot_actions.js.html":{"id":"TelegramBot_actions.js.html","title":"Source: TelegramBot/actions.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: TelegramBot/actions.js /** * @module server/TelegramBot/actions * @requires server/classes/winston * @requires server/mongoDB/models * @desc Contains all bot actions */ const { User } = require('../mongoDB/models'); const LOG = require('../classes/winston'); module.exports = function (bot) { /** @name actionRegister @desc Registers a user in the DB @param {object} ctx - The context of the telegram message */ bot.action('Register', async (ctx) =&gt; { User.findOne({ id: ctx.from.id }).then(user =&gt; { if (user == null) { const newUser = new User({ id: ctx.from.id + 1, name: ctx.from.first_name + ' ' + ctx.from.last_name, role: 'user' }); newUser.save().then(user =&gt; { ctx.reply('User ' + ctx.from.first_name + ' ' + ctx.from.last_name + ' was created', { reply_markup: { resize_keyboard: true, keyboard: [ [{ text: 'Login', callback_data: 'Login' }, { text: 'Logout', callback_data: 'Logout' }] ] } }).then(response =&gt; { setTimeout(function () { if (response) { ctx.deleteMessage(response.message_id); } }, 10000); }); } ).catch(error =&gt; { LOG.error(error); ctx.reply('Get Error'); }); } else { ctx.reply('You are in db'); } }); setTimeout(function () { if (ctx.message) { ctx.deleteMessage(ctx.message.message_id); } }, 10000); }); }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"TelegramBot_commands.js.html":{"id":"TelegramBot_commands.js.html","title":"Source: TelegramBot/commands.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: TelegramBot/commands.js /** * @module server/TelegramBot/commands * @desc Contains all bot commands */ module.exports = function (bot) { bot.command('oldschool', (ctx) =&gt; { ctx.reply('Hello'); }); /** * @name commandStart * @desc Command to greet the user and offer login/logout options * @param {Object} ctx - Context object passed on by Telegram */ bot.command('start', (ctx) =&gt; { ctx.reply('Hi ' + ctx.from.first_name + ' ' + ctx.from.last_name, { reply_markup: { resize_keyboard: true, keyboard: [ [{ text: 'Login', callback_data: 'Login' }, { text: 'Logout', callback_data: 'Logout' }] ] } }); setTimeout(function () { if (ctx.message) { ctx.deleteMessage(ctx.message.message_id); } }, 10000); }); }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"TelegramBot_hears.js.html":{"id":"TelegramBot_hears.js.html","title":"Source: TelegramBot/hears.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: TelegramBot/hears.js /** * @module server/TelegramBot/hears * @requires crypto * @requires server/mongoDB/models * @desc Contains all bot hears */ const crypto = require('crypto'); const { User } = require('../mongoDB/models'); module.exports = function (bot) { /** @name hearsLogin @desc Login hears for bot @param {object} ctx - The context of the telegram message */ bot.hears('Login', (ctx) =&gt; { /** * Find user in the database. * @param {Object} ctx - An object containing all the context information about the message */ User.findOne({ id: ctx.from.id }).then(async user =&gt; { if (user == null) { /** * Reply to user asking if they would like to register * @function * @param {string} ctx - Contains the context information of the message * @param {Object} reply_markup - Contains the reply keyboard markup and the options available */ ctx.reply('You are a new user. Do you want to register?', { reply_markup: { resize_keyboard: true, one_time_keyboard: true, inline_keyboard: [ [{ text: 'Yes', callback_data: 'Register' }] ] } }).then(response =&gt; { setTimeout(function () { if (response) { ctx.deleteMessage(response.message_id); } }, 10000); }); } else { /** * @desc Generate unique token */ const id = crypto.randomBytes(51).toString('hex'); user.authToken = id; await user.save(); ctx.reply(process.env.CHILD_HTTP + 'signin?id=' + id); } }); setTimeout(function () { if (ctx.message) { ctx.deleteMessage(ctx.message.message_id); } }, 10000); }); }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"TelegramBot_telegraf.js.html":{"id":"TelegramBot_telegraf.js.html","title":"Source: TelegramBot/telegraf.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: TelegramBot/telegraf.js /** * @module server/TelegramBot/telegraf * @requires telegraf * @desc This module defines a Telegraf bot and launches it. */ const { Telegraf, session } = require('telegraf'); /** The Telegraf bot instance. @type {Telegraf} */ const bot = new Telegraf(process.env.BOT_TOKEN); // Use the session middleware bot.use(session()); // SIGINT and SIGTERM signal handlers that stop the bot process.once('SIGINT', () =&gt; bot.stop('SIGINT')); process.once('SIGTERM', () =&gt; bot.stop('SIGTERM')); /** Export the bot instance. @type {Telegraf} */ module.exports = bot; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"classes_winston_index.js.html":{"id":"classes_winston_index.js.html","title":"Source: classes/winston/index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: classes/winston/index.js /** * @fileOverview The code is a logger class that uses the Winston library to create loggers for different levels (info, warn, error). It also defines three static methods (log, warn, error) for logging messages. The loggers are configured to write to files with the specified filename and level. * * @module server/classes/winston * @requires winston * @exports module:server/classes/winston */ const winston = require('winston'); /** * @classdesc The code creates a logger using the winston library, which is used to log messages at different levels (info, warn, error). It also creates a LOG class with static methods for logging messages at each level. Finally, it exports the LOG class so it can be used in other modules. * * @constructor */ const logger = winston.createLogger({ format: winston.format.combine( winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }), winston.format.json() ), defaultMeta: { service: 'user-service' }, transports: [ new winston.transports.File({ filename: 'logs/childServer/info.log', level: 'info', options: { clear: true, tailable: true } }), new winston.transports.File({ filename: 'logs/childServer/warn.log', level: 'warn', options: { clear: true, tailable: true } }), new winston.transports.File({ filename: 'logs/childServer/error.log', level: 'error', options: { clear: true, tailable: true } }) ] }); /** * @classDesc Provides easy access to the system bus and provides some helper methods for doing so */ class LOG { /** Logs a message @param {string} message - The message to log */ static log(message) { logger.info(message); } /** Logs a warning message @param {string} message - The warning message to log */ static warn(message) { logger.warn(message); } /** Logs an error message @param {string} message - The error message to log */ static error(message) { logger.error(message); } }; module.exports = LOG; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_index.js.html":{"id":"express_index.js.html","title":"Source: express/index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/index.js /** * @module server/express * @requires express * @requires server/classes/winston * @requires server/express/routes/authRoutes * @requires server/express/routes/userRoutes * @see https://expressjs.com/ * @description This script creates a child server on the given port */ const express = require('express'); const LOG = require('../classes/winston'); /** * App example * @desc App definition module */ const app = express(); /** Registers all the middleware */ app.use(express.json()); const auth_routes = require('./routes/auth.routes'); const user_routes = require('./routes/user.routes'); app.use('/auth', auth_routes); app.use('/user', user_routes); /** * Create child server on given port * @param {number} process.env.CHILD_PORT the port to listen on */ const listen = app.listen(process.env.CHILD_PORT, () =&gt; { LOG.log('Created child server on port ' + process.env.CHILD_PORT); }).on('error', (error) =&gt; { LOG.error('Get error during creting child server on port ' + process.env.CHILD_PORT); LOG.error(error); }); module.exports = { listen, app }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_controllers_index.js.html":{"id":"express_controllers_index.js.html","title":"Source: express/controllers/index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/controllers/index.js /** * @module server/express/controllers * @requires server/express/controllers/authController * @requires server/express/controllers/userController * @description This module defines an object and exports it. The object includes two controllers (defined in different files), auth_controller and user_controller. */ const auth_controller = require('./auth.controller'); const user_controller = require('./user.controller'); module.exports = { auth_controller, user_controller }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_controllers_auth.controller.js.html":{"id":"express_controllers_auth.controller.js.html","title":"Source: express/controllers/auth.controller.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/controllers/auth.controller.js /** * @module server/express/controllers/authController * @requires jsonwebtoken * @requires server/classes/winston * @requires server/mongoDB/models * @description This code allows users to sign in and sign out of an application. The signin function takes a request object and response object, checks the database to if the user is valid, and creates and sends a JSON web token in the response if successful. The signout function also takes a request object and response object and sets the user's authToken to null so that the user is no longer logged in to the application. */ const jwt = require('jsonwebtoken'); const LOG = require('../../classes/winston'); const { User } = require('../../mongoDB/models'); /** Signs in a user. @param {Object} request - Request object @param {Object} response - Response object @return {void} */ const signin = (request, response) =&gt; { User.findOne({ id: request.body.telegramId }).then(async user =&gt; { if (!user) { return response.status(500).send('User not found'); } await responseToken(user, response); }).catch(err =&gt; { LOG.error(JSON.stringify(err)); return response.status(500).send(JSON.stringify(err)); }); }; /** Sends response token. @param {Object} user - User stored in Mongo database @param {Object} response - Response object @return {void} */ async function responseToken(user, response) { const token = jwt.sign({ id: user.id }, process.env.SECRET_KEY, { expiresIn: 86400 // 24 hours }); try { response.send({ AuthToken: token }); } catch (err) { LOG.error(JSON.stringify(err)); } } /** Sign out a user. @param {Object} request - Request object @param {Object} response - Response object @return {void} */ const signout = (request, response) =&gt; { User.findOne({ id: request.body.telegramId }).then(async user =&gt; { user.authToken = null; await user.save(); response.send({ message: 'Finished' }); }).catch(err =&gt; { LOG.error(JSON.stringify(err)); return response.status(500).send(JSON.stringify(err)); }); }; module.exports = { signout, signin }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_controllers_user.controller.js.html":{"id":"express_controllers_user.controller.js.html","title":"Source: express/controllers/user.controller.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/controllers/user.controller.js /** * @module server/express/controllers/userController * @description This moduledefines two functions isUser and isAdmin, which are used to validate the validity of the user and admin. Both take two arguments request and response, and returns a boolean indicating the validity of user or admin as response.send(JSON.stringify(true)). */ /** validate the user is valid or not @param {Object} request - Request object @param {Object} response - Response object @returns {void} A boolean value indicating the validity of the user */ const isUser = (request, response) =&gt; { response.send(JSON.stringify(true)); }; /** validate the admin is valid or not @param {Object} request - Request object @param {Object} response - Response object @returns {void} A boolean value indicating the validity of the admin */ const isAdmin = (request, response) =&gt; { response.send(JSON.stringify(true)); }; module.exports = { isUser, isAdmin }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_middleware_authJwt.js.html":{"id":"express_middleware_authJwt.js.html","title":"Source: express/middleware/authJwt.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/middleware/authJwt.js /** * @module server/express/middleware/authJwt * @requires jsonwebtoken * @requires server/mongoDB/models * @description This file contains the implementations for authenticating users. */ const jwt = require('jsonwebtoken'); const { User } = require('../../mongoDB/models'); /** Verifies an access token for a user @param {Object} request - The request object @param {Object} response - The response object @param {Function} next - The next function to be called @returns {undefined} */ const verifyAccessToken = (request, response, next) =&gt; { const bearerHeader = request.headers.authorization; if (typeof bearerHeader !== 'undefined') { const bearer = bearerHeader.split(' '); const bearerToken = bearer[1]; jwt.verify(bearerToken, process.env.SECRET_KEY, (err, decoded) =&gt; { if (err instanceof jwt.JsonWebTokenError) { return response.status(401).send(JSON.stringify({ message: 'Token is incorrect' })); } else if (err) { return response.status(401).send(JSON.stringify({ message: 'Got error during tokenverify ' })); } request.body.telegramId = decoded.id; next(); }); } else { return response.status(403).send(JSON.stringify({ message: 'No token provided!' })); } }; /** Parses a login id and attaches it to the request object @param {Object} request - The request object @param {Object} response - The response object @param {Function} next - The next function to be called @returns {undefined} */ const parseLoginId = (request, response, next) =&gt; { const id = request.query.id; User.findOne( { authToken: id } ).then(async user =&gt; { if (user) { request.body.telegramId = user.id; user.authToken = null; await user.save(); return next(); } return response.status(403).send(JSON.stringify({ message: 'Cannot find user' })); }).catch(err =&gt; { return response.status(500).send(JSON.stringify(err)); }); }; /** * @function hasAccess * @desc Verifies that a user has the permission level specified. * @param {String} accessLevel - Permission level to be tested. * @return {undefined} - A function that takes a request, response and next parameters. If the user has the access level specified, the next middleware is called. Otherwise a 403 is returned. */ function hasAccess(accessLevel) { return function (request, response, next) { User.findOne( { id: request.body.telegramId } ).then(user =&gt; { if (user &amp;&amp; user.hasAccess(accessLevel)) { return next(); } return response.status(403).send(JSON.stringify({ message: 'Require ' + accessLevel + ' Role!' })); }).catch(err =&gt; { return response.status(500).send(JSON.stringify(err)); }); }; } module.exports = { verifyAccessToken, hasAccess, parseLoginId }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_routes_auth.routes.js.html":{"id":"express_routes_auth.routes.js.html","title":"Source: express/routes/auth.routes.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/routes/auth.routes.js /** * @module server/express/routes/authRoutes * @requires express * @requires server/express/controllers * @requires server/express/middleware/authJwt * @description This is the code for a router in an Express application that mounts authentication endpoints on certain routes. */ /** * Express router to mount user related functions on. * @type {object} * @const * @namespace authRouter */ const router = require('express').Router(); const { auth_controller } = require('../controllers'); const { verifyAccessToken, parseLoginId } = require('../middleware/authJwt'); /** * POST Route to signin into the API * @name post/signin * @memberof module:server/express/routes/authRoutes~authRouter * @param {string} path - Express path * @param {module:server/middleware/authJwt~parseLoginId} parseLoginId - parse param id * @param {module:server/controllers/authController~signin} signin - parse param id */ router.post('/signin', [ parseLoginId ], auth_controller.signin); /** * POST Route to signout into the API * @name post/signout * @memberof module:server/express/routes/authRoutes~authRouter * @param {string} path - Express path * @param {module:server/middleware/authJwt~verifyAccessToken} verifyAccessToken - verify Token * @param {module:server/controllers/authController~signout} signout - signout */ router.post('/signout', [ verifyAccessToken ], auth_controller.signout); module.exports = router; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"express_routes_user.routes.js.html":{"id":"express_routes_user.routes.js.html","title":"Source: express/routes/user.routes.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: express/routes/user.routes.js /** * @module server/express/routes/userRoutes * @requires express * @requires server/express/controllers * @requires server/express/middleware/authJwt * @description This is the code for a router in an Express application that mounts authentication endpoints on certain routes. */ /** * Express router to mount user related functions on. * @type {object} * @const * @namespace userRouter */ const router = require('express').Router(); const { hasAccess, verifyAccessToken } = require('../middleware/authJwt'); const { user_controller } = require('../controllers'); /** * POST Route to signin into the API * @name post/isUser * @memberof module:server/express/routes/userRoutes~userRouter * @param {string} path - Express path * @param {module:server/middleware/authJwt~verifyAccessToken} verifyAccessToken - verify Token * @param {module:server/middleware/authJwt~hasAccess} hasAccessUser - check does user have role user * @param {module:server/controllers/userController~isUser} isUser - response true is user has role user */ router.post('/isUser', [ verifyAccessToken, hasAccess('user') ], user_controller.isUser); /** * POST Route to signin into the API * @name post/isAdmin * @memberof module:server/express/routes/userRoutes~userRouter * @param {string} path - Express path * @param {module:server/middleware/authJwt~verifyAccessToken} verifyAccessToken - verify Token * @param {module:server/middleware/authJwt~hasAccess} hasAccessUser - check does user have role admin * @param {module:server/controllers/userController~isAdmin} isAdmin - response true is user has role admin */ router.post('/isAdmin', [ verifyAccessToken, hasAccess('admin') ], user_controller.isAdmin); /** * exports:router * @returns {module:server/express/routes/userRoutes~userRouter} router */ module.exports = router; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"mongoDB_index.js.html":{"id":"mongoDB_index.js.html","title":"Source: mongoDB/index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: mongoDB/index.js /** * @module server/mongoDB * @requires express * @requires server/classes/winston * @requires server/mongoDB/models * @description This module is used to establish a connection with MongoDB database. */ const LOG = require('../classes/winston'); require('dotenv').config(); const { mongoose, User } = require('./models'); /** @description Set string query restrictions. @const */ mongoose.set('strictQuery', false); /** @description Trigger when connected to the mongo server. Logs a message to console when connected. @const */ mongoose.connection.on('open', function (ref) { return LOG.log('Connected to mongo server.'); }); /** @description Trigger when faced an error while trying to connect to mongo server. Logs a message with error stacktrace to console. @const */ mongoose.connection.on('error', function (err) { LOG.log('Could not connect to mongo server!'); LOG.log(err); return err; }); /** @description Get the credentials from .env file @const */ const uri = 'mongodb+srv://' + process.env.DB_USER + ':' + process.env.DB_PASSWORD + '@serverlessinstance0.bl5br.mongodb.net/BoardGames_Debug?retryWrites=true&amp;w=majority'; /** @description Connect with the mongodb using provided URI. Logs message in console. @const */ mongoose.connect(uri).then(result =&gt; { User.updateMany({}, { $set: { authToken: null } }, function (err, user) { if (err) { LOG.error(JSON.stringify(err)); } }); LOG.log('Mongodb connnected'); }).catch((error) =&gt; { LOG.error({ error: error.message || error }); }); × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"mongoDB_models_index.js.html":{"id":"mongoDB_models_index.js.html","title":"Source: mongoDB/models/index.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: mongoDB/models/index.js /** * @module server/mongoDB/models * @requires mongoose * @description This code exports the mongoose object and User model from the server/mongoDB/models folder. The mongoose object is used for defining models to interact and read from MongoDB, and the User model is used for creating and interacting with users in the MongoDB database. */ const { mongoose, Schema } = require('mongoose'); /** * @desc Create User model class */ const User = require('./user.model')(mongoose, Schema); module.exports = { mongoose, User }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"mongoDB_models_user.model.js.html":{"id":"mongoDB_models_user.model.js.html","title":"Source: mongoDB/models/user.model.js","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Source: mongoDB/models/user.model.js /** * @module server/mongoDB/models/userModel * @description This code is a function which defines and creates a schema for a User in the mongoose-role plugin. It creates a model with an 'id', 'name', and 'authToken' field, where the 'id' and 'name' fields are marked as 'required'. To provide authentication when users sign in, the 'authToken' field is optional but can be used. The plugin then adds roles ('public', 'user', 'admin') with corresponding access levels. Finally, it returns the User model. */ module.exports = function (mongoose, Schema) { /** * @class UserSchema * @classDesc A class which defines a schema for a User. The User model includes an ID, a name, and an authentication token. The ID and name fields are both set as 'required', meaning they are required fields which must have a valid value. The authentication token, while not required, can be used to provide authentication when users sign in. */ const UserSchema = new Schema({ /** *@memberof module:server/mongoDB/models/userModel~UserSchema *@name id *@type {Number} *@description Unique ID for the user *@required */ id: { type: Number, unique: true, required: true }, /** *@memberof module:server/mongoDB/models/userModel~UserSchema *@name name *@type {String} *@description Full name of the user *@required */ name: { type: String, required: true }, /** *@memberof module:server/mongoDB/models/userModel~UserSchema *@name authToken *@type {String} *@description Token User */ authToken: { type: String, required: false } }); /** *UserSchema Plugin with Mongoose-Role *@function addRole *@description This plugin enables a user schema to use roles as specified and limited by access levels. The roles provided are Public, User and Admin. *@param {Object} roles - Roles that are available: 'public', 'user', 'admin' *@param {Object} accessLevels - Object containing all of the roles and the corresponding access: *public: Array - Contains all three roles *user: Array - Contains only the user role *admin: Array - Contains only the admin role */ UserSchema.plugin(require('mongoose-role'), { roles: ['public', 'user', 'admin'], accessLevels: { public: ['public', 'user', 'admin'], user: ['user'], admin: ['admin'] } }); const User = mongoose.model('user', UserSchema); /** @param {*} return @description Returns the User model @returns User */ return User; }; × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Modules Members module:server/TelegramBot/telegraf :Telegraf Export the bot instance. Type: Telegraf Source: TelegramBot/telegraf.js, line 25 module:server/express/routes/userRoutes exports:router Source: express/routes/user.routes.js, line 57 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Classes Members module:server/TelegramBot/telegraf :Telegraf Export the bot instance. Type: Telegraf Source: TelegramBot/telegraf.js, line 25 module:server/express/routes/userRoutes exports:router Source: express/routes/user.routes.js, line 57 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"namespaces.list.html":{"id":"namespaces.list.html","title":"Namespaces","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Namespaces Members module:server/TelegramBot/telegraf :Telegraf Export the bot instance. Type: Telegraf Source: TelegramBot/telegraf.js, line 25 module:server/express/routes/userRoutes exports:router Source: express/routes/user.routes.js, line 57 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema boardgames_web_main_server 0.2.0 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server.html":{"id":"module-server.html","title":"Module: server","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server This code sets up the application's database, web server and TelegramBot. The first line sets up the MongoDB connection and loads all the models. The second line begins loading the Express web server components, such as routes and middleware. The third line sets up the TelegramBot instance for messaging services provided by Telegram. Source: index.js, line 1 Requires module:server/mongoDB module:server/express module:server/TelegramBot × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_TelegramBot.html":{"id":"module-server_TelegramBot.html","title":"Module: server/TelegramBot","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/TelegramBot Contains all bot hears Source: TelegramBot/index.js, line 1 Requires module:server/classes/winston module:server/TelegramBot/telegraf Members &lt;inner, constant&gt; bot This file imports all functions from ./actions, ./hears and ./commands Source: TelegramBot/index.js, line 13 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_TelegramBot_actions.html":{"id":"module-server_TelegramBot_actions.html","title":"Module: server/TelegramBot/actions","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/TelegramBot/actions Contains all bot actions Source: TelegramBot/actions.js, line 1 Requires module:server/classes/winston module:server/mongoDB/models Members &lt;inner&gt; actionRegister Registers a user in the DB Source: TelegramBot/actions.js, line 12 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_TelegramBot_commands.html":{"id":"module-server_TelegramBot_commands.html","title":"Module: server/TelegramBot/commands","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/TelegramBot/commands Contains all bot commands Source: TelegramBot/commands.js, line 1 Members &lt;inner&gt; commandStart Command to greet the user and offer login/logout options Source: TelegramBot/commands.js, line 11 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_TelegramBot_hears.html":{"id":"module-server_TelegramBot_hears.html","title":"Module: server/TelegramBot/hears","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/TelegramBot/hears Contains all bot hears Source: TelegramBot/hears.js, line 1 Requires module:crypto module:server/mongoDB/models Members &lt;inner&gt; hearsLogin Login hears for bot Source: TelegramBot/hears.js, line 12 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_TelegramBot_telegraf.html":{"id":"module-server_TelegramBot_telegraf.html","title":"Module: server/TelegramBot/telegraf","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/TelegramBot/telegraf This module defines a Telegraf bot and launches it. Source: TelegramBot/telegraf.js, line 1 Requires module:telegraf Members &lt;inner, constant&gt; bot :Telegraf The Telegraf bot instance. Type: Telegraf Source: TelegramBot/telegraf.js, line 12 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_classes_winston.html":{"id":"module-server_classes_winston.html","title":"Module: server/classes/winston","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/classes/winston The code is a logger class that uses the Winston library to create loggers for different levels (info, warn, error). It also defines three static methods (log, warn, error) for logging messages. The loggers are configured to write to files with the specified filename and level. Source: classes/winston/index.js, line 1 Requires module:winston Classes LOG logger × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_classes_winston-LOG.html":{"id":"module-server_classes_winston-LOG.html","title":"Class: LOG","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Class: LOG server/classes/winston~ LOG Provides easy access to the system bus and provides some helper methods for doing so new LOG() Source: classes/winston/index.js, line 33 Methods &lt;static&gt; error(message) Logs an error message Parameters: Name Type Description message string The error message to log Source: classes/winston/index.js, line 54 &lt;static&gt; log(message) Logs a message Parameters: Name Type Description message string The message to log Source: classes/winston/index.js, line 38 &lt;static&gt; warn(message) Logs a warning message Parameters: Name Type Description message string The warning message to log Source: classes/winston/index.js, line 46 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_classes_winston-logger.html":{"id":"module-server_classes_winston-logger.html","title":"Class: logger","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Class: logger server/classes/winston~ logger The code creates a logger using the winston library, which is used to log messages at different levels (info, warn, error). It also creates a LOG class with static methods for logging messages at each level. Finally, it exports the LOG class so it can be used in other modules. new logger() Source: classes/winston/index.js, line 15 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express.html":{"id":"module-server_express.html","title":"Module: server/express","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express This script creates a child server on the given port Source: express/index.js, line 1 See: https://expressjs.com/ Requires module:express module:server/classes/winston module:server/express/routes/authRoutes module:server/express/routes/userRoutes Members &lt;inner, constant&gt; app App definition module Source: express/index.js, line 18 &lt;inner, constant&gt; listen Create child server on given port Source: express/index.js, line 36 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_controllers.html":{"id":"module-server_express_controllers.html","title":"Module: server/express/controllers","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express/controllers This module defines an object and exports it. The object includes two controllers (defined in different files), auth_controller and user_controller. Source: express/controllers/index.js, line 1 Requires module:server/express/controllers/authController module:server/express/controllers/userController × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_controllers_authController.html":{"id":"module-server_express_controllers_authController.html","title":"Module: server/express/controllers/authController","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express/controllers/authController This code allows users to sign in and sign out of an application. The signin function takes a request object and response object, checks the database to if the user is valid, and creates and sends a JSON web token in the response if successful. The signout function also takes a request object and response object and sets the user's authToken to null so that the user is no longer logged in to the application. Source: express/controllers/auth.controller.js, line 1 Requires module:jsonwebtoken module:server/classes/winston module:server/mongoDB/models Methods &lt;async, inner&gt; responseToken(user, response) Sends response token. Parameters: Name Type Description user Object User stored in Mongo database response Object Response object Source: express/controllers/auth.controller.js, line 38 Returns: Type void &lt;inner&gt; signin(request, response) Signs in a user. Parameters: Name Type Description request Object Request object response Object Response object Source: express/controllers/auth.controller.js, line 22 Returns: Type void &lt;inner&gt; signout(request, response) Sign out a user. Parameters: Name Type Description request Object Request object response Object Response object Source: express/controllers/auth.controller.js, line 55 Returns: Type void × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_controllers_userController.html":{"id":"module-server_express_controllers_userController.html","title":"Module: server/express/controllers/userController","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express/controllers/userController This moduledefines two functions isUser and isAdmin, which are used to validate the validity of the user and admin. Both take two arguments request and response, and returns a boolean indicating the validity of user or admin as response.send(JSON.stringify(true)). Source: express/controllers/user.controller.js, line 1 Methods &lt;inner&gt; isAdmin(request, response) validate the admin is valid or not Parameters: Name Type Description request Object Request object response Object Response object Source: express/controllers/user.controller.js, line 22 Returns: A boolean value indicating the validity of the admin Type void &lt;inner&gt; isUser(request, response) validate the user is valid or not Parameters: Name Type Description request Object Request object response Object Response object Source: express/controllers/user.controller.js, line 12 Returns: A boolean value indicating the validity of the user Type void × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_middleware_authJwt.html":{"id":"module-server_express_middleware_authJwt.html","title":"Module: server/express/middleware/authJwt","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express/middleware/authJwt This file contains the implementations for authenticating users. Source: express/middleware/authJwt.js, line 1 Requires module:jsonwebtoken module:server/mongoDB/models Methods &lt;inner&gt; hasAccess(accessLevel) Verifies that a user has the permission level specified. Parameters: Name Type Description accessLevel String Permission level to be tested. Source: express/middleware/authJwt.js, line 64 Returns: A function that takes a request, response and next parameters. If the user has the access level specified, the next middleware is called. Otherwise a 403 is returned. Type undefined &lt;inner&gt; parseLoginId(request, response, next) Parses a login id and attaches it to the request object Parameters: Name Type Description request Object The request object response Object The response object next function The next function to be called Source: express/middleware/authJwt.js, line 45 Returns: Type undefined &lt;inner&gt; verifyAccessToken(request, response, next) Verifies an access token for a user Parameters: Name Type Description request Object The request object response Object The response object next function The next function to be called Source: express/middleware/authJwt.js, line 19 Returns: Type undefined × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_routes_authRoutes.html":{"id":"module-server_express_routes_authRoutes.html","title":"Module: server/express/routes/authRoutes","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express/routes/authRoutes This is the code for a router in an Express application that mounts authentication endpoints on certain routes. Source: express/routes/auth.routes.js, line 1 Requires module:express module:server/express/controllers module:server/express/middleware/authJwt Namespaces authRouter × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_routes_authRoutes-authRouter.html":{"id":"module-server_express_routes_authRoutes-authRouter.html","title":"Namespace: authRouter","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Namespace: authRouter server/express/routes/authRoutes~ authRouter Express router to mount user related functions on. Source: express/routes/auth.routes.js, line 9 Members &lt;static&gt; post/signin POST Route to signin into the API Source: express/routes/auth.routes.js, line 21 &lt;static&gt; post/signout POST Route to signout into the API Source: express/routes/auth.routes.js, line 35 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_routes_userRoutes.html":{"id":"module-server_express_routes_userRoutes.html","title":"Module: server/express/routes/userRoutes","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/express/routes/userRoutes This is the code for a router in an Express application that mounts authentication endpoints on certain routes. Source: express/routes/user.routes.js, line 1 Requires module:express module:server/express/controllers module:server/express/middleware/authJwt Namespaces userRouter × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_express_routes_userRoutes-userRouter.html":{"id":"module-server_express_routes_userRoutes-userRouter.html","title":"Namespace: userRouter","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Namespace: userRouter server/express/routes/userRoutes~ userRouter Express router to mount user related functions on. Source: express/routes/user.routes.js, line 9 Members &lt;static&gt; post/isAdmin POST Route to signin into the API Source: express/routes/user.routes.js, line 37 &lt;static&gt; post/isUser POST Route to signin into the API Source: express/routes/user.routes.js, line 21 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_mongoDB.html":{"id":"module-server_mongoDB.html","title":"Module: server/mongoDB","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/mongoDB This module is used to establish a connection with MongoDB database. Source: mongoDB/index.js, line 1 Requires module:express module:server/classes/winston module:server/mongoDB/models Members &lt;inner, constant&gt; uri Get the credentials from .env file Source: mongoDB/index.js, line 44 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_mongoDB_models.html":{"id":"module-server_mongoDB_models.html","title":"Module: server/mongoDB/models","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/mongoDB/models This code exports the mongoose object and User model from the server/mongoDB/models folder. The mongoose object is used for defining models to interact and read from MongoDB, and the User model is used for creating and interacting with users in the MongoDB database. Source: mongoDB/models/index.js, line 1 Requires module:mongoose Members &lt;inner, constant&gt; User Create User model class Source: mongoDB/models/index.js, line 12 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_mongoDB_models_userModel.html":{"id":"module-server_mongoDB_models_userModel.html","title":"Module: server/mongoDB/models/userModel","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Module: server/mongoDB/models/userModel This code is a function which defines and creates a schema for a User in the mongoose-role plugin. It creates a model with an 'id', 'name', and 'authToken' field, where the 'id' and 'name' fields are marked as 'required'. To provide authentication when users sign in, the 'authToken' field is optional but can be used. The plugin then adds roles ('public', 'user', 'admin') with corresponding access levels. Finally, it returns the User model. Source: mongoDB/models/user.model.js, line 1 Classes UserSchema Methods &lt;inner&gt; addRole(roles, accessLevels) This plugin enables a user schema to use roles as specified and limited by access levels. The roles provided are Public, User and Admin. Parameters: Name Type Description roles Object Roles that are available: 'public', 'user', 'admin' accessLevels Object Object containing all of the roles and the corresponding access: public: Array - Contains all three roles user: Array - Contains only the user role admin: Array - Contains only the admin role Source: mongoDB/models/user.model.js, line 46 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "},"module-server_mongoDB_models_userModel-UserSchema.html":{"id":"module-server_mongoDB_models_userModel-UserSchema.html","title":"Class: UserSchema","body":" TestSystem Namespaces server/express/routes/authRoutes~authRouterserver/express/routes/userRoutes~userRouter Modules serverserver/TelegramBotserver/TelegramBot/actionsserver/TelegramBot/commandsserver/TelegramBot/hearsserver/TelegramBot/telegrafserver/classes/winstonserver/expressserver/express/controllersserver/express/controllers/authControllerserver/express/controllers/userControllerserver/express/middleware/authJwtserver/express/routes/authRoutesserver/express/routes/userRoutesserver/mongoDBserver/mongoDB/modelsserver/mongoDB/models/userModel Classes server/classes/winston~LOGserver/classes/winston~loggerserver/mongoDB/models/userModel~UserSchema Class: UserSchema server/mongoDB/models/userModel~ UserSchema A class which defines a schema for a User. The User model includes an ID, a name, and an authentication token. The ID and name fields are both set as 'required', meaning they are required fields which must have a valid value. The authentication token, while not required, can be used to provide authentication when users sign in. new UserSchema() Source: mongoDB/models/user.model.js, line 7 Members &lt;static&gt; authToken :String Token User Type: String Source: mongoDB/models/user.model.js, line 35 &lt;static&gt; id :Number Unique ID for the user Type: Number Source: mongoDB/models/user.model.js, line 12 &lt;static&gt; name :String Full name of the user Type: String Source: mongoDB/models/user.model.js, line 24 × Search results Close Documentation generated by JSDoc 4.0.0 on 2023-02-16T01:06:38+02:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
